webpackJsonp([1],{119:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(0),u=n.n(c),s=n(10),l=n(318),f=n.n(l),p=n(38),d=n(315),y=n(319),v=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),h=Object(p.a)(function(){return n.e(4).then(n.bind(null,320))}),m=Object(p.a)(function(){return n.e(5).then(n.bind(null,321))}),b=function(t){function e(){var t,n,o,c;i(this,e);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=o=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),o.state={inputTitle:"",activities:[],editingActivityId:null},o.handleInput=function(t){var e=t.target.name;e=t.target.value,o.setState({inputTitle:e})},o.handleSubmit=function(t){t.preventDefault();var e=o.state.inputTitle;o.setState({inputTitle:""}),d.a.create(e).then(function(t){t&&t.data&&o.setState(function(e){return{activities:e.activities.concat([t.data.activity])}})}).catch(function(t){console.log(t)})},o.enableEditing=function(t){o.setState({editingActivityId:t},function(){o.title.focus()})},o.updateActivity=function(t){var e=o.state.activities.findIndex(function(e){return e.id===t.id}),n=f()(o.state.activities,a({},e,{$set:t}));o.setState({activities:n,editingActivityId:null})},o.updateActivityStreak=function(t){var e=o.state.activities.findIndex(function(e){return e.id===t.activity_id}),n=o.state.activities[e].streaks.findIndex(function(e){return e.id===t.id}),i=f()(o.state.activities,a({},e,{streaks:a({},n,{$set:t})}));o.setState({activities:i})},o.newActivityStreak=function(t){var e=o.state.activities.findIndex(function(e){return e.id===t.streak.activity_id}),n=f()(o.state.activities,a({},e,{streaks:{$push:[t.streak]}}));o.setState({activities:n})},o.deleteActivity=function(t){d.a.delete(t).then(function(e){var n=o.state.activities.findIndex(function(e){return e.id===t}),a=f()(o.state.activities,{$splice:[[n,1]]});o.setState({activities:a})}).catch(function(t){return console.log(t)})},c=n,r(o,c)}return o(e,t),v(e,[{key:"componentDidMount",value:function(){var t=this;d.a.all().then(function(e){200===e.status?(console.log("from componentDidMount",e.data),t.setState({activities:e.data})):alert("could not fetch activities")}).catch(function(t){console.log(t)})}},{key:"render",value:function(){var t=this;return u.a.createElement("div",{className:"activities"},u.a.createElement(h,{activities:this.state.activities}),u.a.createElement("h1",null," Your Activities: "),u.a.createElement("div",{className:"activity-card"},this.state.activities.map(function(e){return t.state.editingActivityId===e.id?u.a.createElement(y.a,{activity:e,key:e.id,updateActivity:t.updateActivity,titleRef:function(e){return t.title=e}}):u.a.createElement(m,{activity:e,key:e.id,onClick:t.enableEditing,onDelete:t.deleteActivity,updateStreakItem:t.updateActivityStreak,newStreakItem:t.newActivityStreak})})),u.a.createElement(s.b,{className:"Form",onSubmit:this.handleSubmit},u.a.createElement(s.c,{className:"FormInput",type:"text",name:"inputTitle",required:!0,placeholder:"eg. Stay Hydrated",value:this.state.inputTitle,onChange:this.handleInput}),u.a.createElement("div",{className:"Button"},u.a.createElement(s.a,{className:"submitButton",type:"submit"},"Add New Activity"))))}}]),e}(u.a.Component);e.default=b},315:function(t,e,n){"use strict";var a=n(35),i=n(36),r=n.n(i),o={all:function(){return r()({method:"GET",url:a.a+"/activities/",headers:{"X-User-Email":localStorage.email,"X-User-Token":localStorage.accessToken}})},create:function(t){return r()({method:"POST",url:a.a+"/activities/",data:{title:t},headers:{"X-User-Email":localStorage.email,"X-User-Token":localStorage.accessToken}})},edit:function(t,e){return r()({method:"PUT",url:a.a+"/activities/"+t,data:{activity:e},headers:{"X-User-Email":localStorage.email,"X-User-Token":localStorage.accessToken}})},delete:function(t){return r()({method:"DELETE",url:a.a+"/activities/"+t,headers:{"X-User-Email":localStorage.email,"X-User-Token":localStorage.accessToken}})}};e.a=o},318:function(t,e,n){function a(t){if(Array.isArray(t))return b(t.constructor(t.length),t);if("Map"===m(t))return new Map(t);if("Set"===m(t))return new Set(t);if(t&&"object"===typeof t){var e=Object.getPrototypeOf(t);return b(Object.create(e),t)}return t}function i(){function t(n,i){"function"===typeof i&&(i={$apply:i}),Array.isArray(n)&&Array.isArray(i)||d(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),d("object"===typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var r=n;return g(i).forEach(function(o){if(y.call(e,o)){var c=n===r;r=e[o](i[o],r,i,n),c&&t.isEquals(r,n)&&(r=n)}else{var u="Map"===m(n)?t(n.get(o),i[o]):t(n[o],i[o]);t.isEquals(u,r[o])&&("undefined"!==typeof u||y.call(n,o))||(r===n&&(r=a(n)),"Map"===m(r)?r.set(o,u):r[o]=u)}}),r}var e=b({},E);return t.extend=function(t,n){e[t]=n},t.isEquals=function(t,e){return t===e},t}function r(t,e,n){d(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),o(e[n],n)}function o(t,e){d(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function c(t,e){d(Array.isArray(t),"Expected $splice target to be an array; got %s",t),u(e.$splice)}function u(t){d(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function s(t){d("function"===typeof t,"update(): expected spec of $apply to be a function; got %s.",t)}function l(t){d(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}function f(t,e){d(e&&"object"===typeof e,"update(): $merge expects a spec of type 'object'; got %s",e),d(t&&"object"===typeof t,"update(): $merge expects a target of type 'object'; got %s",t)}function p(t,e){var n=m(t);d("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}var d=n(3),y=Object.prototype.hasOwnProperty,v=Array.prototype.splice,h=Object.prototype.toString,m=function(t){return h.call(t).slice(8,-1)},b=Object.assign||function(t,e){return g(e).forEach(function(n){y.call(e,n)&&(t[n]=e[n])}),t},g="function"===typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)},E={$push:function(t,e,n){return r(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return r(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,i){return c(e,n),t.forEach(function(t){u(t),e===i&&t.length&&(e=a(i)),v.apply(e,t)}),e},$set:function(t,e,n){return l(n),t},$toggle:function(t,e){o(t,"$toggle");var n=t.length?a(e):e;return t.forEach(function(t){n[t]=!e[t]}),n},$unset:function(t,e,n,i){return o(t,"$unset"),t.forEach(function(t){Object.hasOwnProperty.call(e,t)&&(e===i&&(e=a(i)),delete e[t])}),e},$add:function(t,e,n,i){return p(e,"$add"),o(t,"$add"),"Map"===m(e)?t.forEach(function(t){var n=t[0],r=t[1];e===i&&e.get(n)!==r&&(e=a(i)),e.set(n,r)}):t.forEach(function(t){e!==i||e.has(t)||(e=a(i)),e.add(t)}),e},$remove:function(t,e,n,i){return p(e,"$remove"),o(t,"$remove"),t.forEach(function(t){e===i&&e.has(t)&&(e=a(i)),e.delete(t)}),e},$merge:function(t,e,n,i){return f(e,t),g(t).forEach(function(n){t[n]!==e[n]&&(e===i&&(e=a(i)),e[n]=t[n])}),e},$apply:function(t,e){return s(t),t(e)}},S=i();t.exports=S,t.exports.default=S,t.exports.newContext=i},319:function(t,e,n){"use strict";function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=n(0),u=n.n(c),s=n(315),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),f=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleInput=function(t){n.setState(a({},t.target.name,t.target.value))},n.handleSubmit=function(t){t.preventDefault()},n.handleBlur=function(){var t={title:n.state.title};s.a.edit(n.props.activity.id,t).then(function(t){n.props.updateActivity(t.data)}).catch(function(t){return console.log(t)})},n.state={title:n.props.activity.title},n}return o(e,t),l(e,[{key:"render",value:function(){var t=this.props.activity.streaks[this.props.activity.streaks.length-1];return u.a.createElement("div",{className:"activity-tile"},u.a.createElement("form",{onBlur:this.handleBlur,onSubmit:this.handleSubmit},u.a.createElement("input",{className:"edit-title-input",type:"text",name:"title",value:this.state.title,onChange:this.handleInput,ref:this.props.titleRef})),u.a.createElement("h2",null,"Current Streak:"),u.a.createElement("h3",null,0===this.props.activity.streaks.length?"no streak":t.current_streak),u.a.createElement("h2",null,"Streak Status:"),u.a.createElement("h3",null,0===this.props.activity.streaks.length?"no streak":t.status))}}]),e}(c.Component);e.a=f}});
//# sourceMappingURL=1.6d3c3236.chunk.js.map